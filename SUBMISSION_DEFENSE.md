# üèÜ SUBMISSION DEFENSE HANDBOOK
## Microsoft Imagine Cup 2026 - Final Round

### üìä 1. ARCHITECTURE (The "Mental Diagram")

```mermaid
graph TD
    UI[Frontend\nNext.js\n(Untrusted)] -->|Intent| API[Backend\nFastAPI\n(Enforcement)]
    API -->|Read/Write| DB[(PostgreSQL\nAuthoritative)]
    
    subgraph "Strict Isolation"
        AI[Azure OpenAI]
        API -.->|Interpret SOP| AI
        AI -.->|Explain Violation| API
    end

    subgraph "Database Source of Truth"
        DB1[procedures\n(Static)]
        DB2[batches\n(State)]
        DB3[audit_logs\n(Evidence)]
        DB4[violations\n(Facts)]
    end
    
    DB --> DB1
    DB --> DB2
    DB --> DB3
    DB --> DB4
```

### üó£Ô∏è 2. JUDGE Q&A CHEAT SHEET

**Q: "What if someone bypasses the UI?"**
A: "The UI is untrusted. All enforcement is FSM-driven on the backend. We assume the client is compromised."

**Q: "What if AI hallucinates?"**
A: "AI is never in the enforcement loop. It only interprets static text for humans. The State Machine decides validity, not the LLM."

**Q: "How do you ensure audit logs aren't tampered with?"**
A: "Audit logs are append-only, written transactionally with the state change. They use composite keys (not surrogate IDs) and are projected directly from the DB."

### üõ°Ô∏è 3. LIVE ATTACK SIMULATION

| Attack | Expected Result | Why It Passes |
| :--- | :--- | :--- |
| **"Skip Approval"** | `VIOLATED` state + Audit Log | FSM rejects `progress` from `IN_PROGRESS` without `APPROVED` guard. |
| **"Direct API Call"** | Rejection / Violation | API enforces same rules as UI. Frontend has no special privileges. |
| **"Kill AI"** | System functions normally | AI is an enhancement, not a dependency. |
| **"Refresh Page"** | State persists | Rehydrated from DB, not local storage. |

### ‚úÖ 4. SUBMISSION CHECKLIST

- [ ] **Backend**: Running on Port 8000
- [ ] **Frontend**: Running on Port 3000
- [ ] **Database**: Migrations Current (`alembic upgrade head`)
- [ ] **Data**: Dashboard shows non-zero counts
- [ ] **Env**: `AI_ENABLED=true` (or false for safety demo)

---
*Generated by Antigravity*
